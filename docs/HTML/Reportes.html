<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard √ìptica</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
  <style>
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px);}
  to { opacity: 1; transform: translateY(0);}
}
.animate-fadeIn {
  animation: fadeIn 0.7s cubic-bezier(.4,0,.2,1) both;
}
@keyframes bounceIn {
  0% { transform: scale(0.7); opacity: 0; }
  60% { transform: scale(1.1); opacity: 1; }
  80% { transform: scale(0.95);}
  100% { transform: scale(1);}
}
.animate-bounceIn { animation: bounceIn 0.7s cubic-bezier(.4,0,.2,1) both; }

#citasContainer {
  display: grid;
  grid-template-columns: repeat(1, 1fr); /* Valor por defecto para m√≥viles */
}

@media (min-width: 640px) {
  #citasContainer {
    grid-template-columns: repeat(2, 1fr); /* Tabletas */
  }
}

@media (min-width: 1024px) {
  #citasContainer {
    grid-template-columns: repeat(3, 1fr); /* Escritorio */
  }
}
/* Agregar a la secci√≥n de estilos */
@media (max-width: 640px) {
  /* Tarjetas m√°s compactas en m√≥viles */
  #citasContainer > div {
    min-height: 180px;
  }
  
  /* Hacer el texto m√°s peque√±o en m√≥viles */
  .info-label {
    font-size: 0.7rem;
  }
  
  /* Ajustar el indicador de tiempo real */
  #realtimeIndicator .rounded-full {
    width: 0.3rem;
    height: 0.3rem;
  }
}
</style>
</head>
<body class="bg-gradient-to-br from-indigo-100 via-white to-indigo-200 min-h-screen">

  <div class="flex flex-col md:flex-row min-h-screen">
    <!-- Sidebar para escritorio y m√≥vil -->
<aside id="sidebar"
  class="bg-gradient-to-b from-[#4fd3e6] to-[#22325a] text-white w-64 flex-shrink-0 flex-col shadow-lg sticky top-0 h-screen z-30 transition-transform duration-300 hidden md:flex">
  <div class="p-6 flex flex-col items-center">
    <div class="bg-white rounded-full p-0 mb-4 shadow-lg w-28 h-28 flex items-center justify-center border-4 border-indigo-200">
      <img src="/Imagenes/redowan-dhrubo-OWfBsDDOUlQ-unsplash.webp" alt="Logo √ìptica" class="h-24 w-24 object-cover rounded-full">
    </div>
    <h2 class="text-3xl font-extrabold mb-8 tracking-wide text-center" style="color:#22325a;">
  Centro √ìptico Gonz√°lez
</h2>
    <nav class="space-y-2 w-full">
<!-- Por esta -->
<a href="Index.html" class="flex items-center gap-3 py-2 px-4 rounded-lg hover:bg-indigo-600 transition font-semibold hover:scale-105">
  <span class="text-xl">üìä</span> <span>Dashboard</span>
</a>
      <a href="/HTML/Citas.html" class="flex items-center gap-3 py-2 px-4 rounded-lg hover:bg-indigo-600 transition font-semibold hover:scale-105">
        <span class="text-xl">üìÖ</span> <span>Citas</span>
      </a>
      <a href="/HTML/CarteraDeClientes.html" class="flex items-center gap-3 py-2 px-4 rounded-lg hover:bg-indigo-600 transition font-semibold hover:scale-105">
        <span class="text-xl">üë§</span> <span>Clientes</span>
      </a>
<!-- Por esta -->
<a href="/HTML/Reportes.html" class="flex items-center gap-3 py-2 px-4 rounded-lg bg-indigo-800 hover:bg-indigo-600 transition font-semibold shadow hover:scale-105">
  <span class="text-xl">üìà</span> <span>Reportes</span>
</a>
      <a href="/HTML/Configuracion.html" class="flex items-center gap-3 py-2 px-4 rounded-lg hover:bg-indigo-600 transition font-semibold hover:scale-105">
        <span class="text-xl">‚öôÔ∏è</span> <span>Configuraci√≥n</span>
      </a>
    </nav>
  </div>
  <div class="mt-auto p-4 text-xs text-indigo-200 text-center">
    &copy; 2025 Centro √ìptico Gonz√°lez
  </div>
</aside>

<!-- Sidebar m√≥vil (oculto en escritorio) -->
<div id="sidebarMobileBackdrop" class="fixed inset-0 bg-black bg-opacity-40 z-40 hidden"></div>
<aside id="sidebarMobile"
  class="fixed top-0 left-0 h-full w-64 bg-gradient-to-b from-indigo-900 to-indigo-700 text-white shadow-lg z-50 transform -translate-x-full transition-transform duration-300 flex flex-col md:hidden">
  <div class="p-6 flex flex-col items-center">
    <button id="closeSidebarMobile" class="absolute top-4 right-4 text-white text-2xl focus:outline-none">&times;</button>
    <div class="bg-white rounded-full p-0 mb-4 shadow-lg w-28 h-28 flex items-center justify-center border-4 border-indigo-200">
      <img src="/Imagenes/redowan-dhrubo-OWfBsDDOUlQ-unsplash.webp" alt="Logo √ìptica" class="h-24 w-24 object-cover rounded-full">
    </div>
    <h2 class="text-2xl font-bold mb-8 tracking-wide text-center">√ìptica Elegante</h2>
    <nav class="space-y-2 w-full">
      <a href="Index.html" class="flex items-center gap-3 py-2 px-4 rounded-lg bg-indigo-800 hover:bg-indigo-600 transition font-semibold shadow hover:scale-105">
        <span class="text-xl">üìä</span> <span>Dashboard</span>
      </a>
      <a href="/HTML/Citas.html" class="flex items-center gap-3 py-2 px-4 rounded-lg hover:bg-indigo-600 transition font-semibold hover:scale-105">
        <span class="text-xl">üìÖ</span> <span>Citas</span>
      </a>
      <a href="/HTML/CarteraDeClientes.html" class="flex items-center gap-3 py-2 px-4 rounded-lg hover:bg-indigo-600 transition font-semibold hover:scale-105">
        <span class="text-xl">üë§</span> <span>Clientes</span>
      </a>
      <a href="/HTML/Reportes.html" class="flex items-center gap-3 py-2 px-4 rounded-lg hover:bg-indigo-600 transition font-semibold hover:scale-105">
        <span class="text-xl">üìà</span> <span>Reportes</span>
      </a>
      <a href="/HTML/Configuracion.html" class="flex items-center gap-3 py-2 px-4 rounded-lg hover:bg-indigo-600 transition font-semibold hover:scale-105">
        <span class="text-xl">‚öôÔ∏è</span> <span>Configuraci√≥n</span>
      </a>
    </nav>
  </div>
  <div class="mt-auto p-4 text-xs text-indigo-200 text-center">
    &copy; 2025 Centro √ìptico Gonz√°lez
  </div>
</aside>

<!-- Bot√≥n toggle para m√≥viles -->
<div class="md:hidden fixed top-4 left-4 z-50">
  <button id="sidebarToggle" class="bg-indigo-800 text-white p-2 rounded-full shadow-lg focus:outline-none focus:ring-2 focus:ring-white transition-opacity duration-300">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
    </svg>
  </button>
</div>

    <!-- Contenido principal -->
    <div class="flex-1 flex flex-col">
      <!-- Reemplazar la estructura del header -->
<header class="bg-white/80 shadow p-4 sticky top-0 z-10 backdrop-blur">
  <div class="flex flex-col gap-4">
    <!-- Fila superior con t√≠tulo y estado -->
    <div class="flex justify-between items-center">
      <h1 class="text-xl sm:text-2xl font-bold text-indigo-800 tracking-wide">Dashboard de Citas</h1>
      <div class="flex items-center gap-2">
        <div id="realtimeIndicator" class="flex items-center text-xs bg-green-50 text-green-700 px-2 py-1 rounded-full border border-green-200">
          <span class="w-2 h-2 rounded-full bg-green-500 mr-1"></span>
          <span class="hidden sm:inline">Tiempo real</span>
        </div>
        <!-- Campanita de notificaciones -->
        <div class="relative">
          <button id="notificationBell" class="p-2 rounded-full hover:bg-gray-100 relative transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
            </svg>
            <span id="notificationCount" class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span>
          </button>
        </div>
      </div>
    </div>
    
    <!-- Fila de b√∫squeda (responsive) -->
    <div class="flex flex-col sm:flex-row gap-3">
      <div class="relative flex-grow">
        <input type="text" id="searchInput" placeholder="Buscar por ID o nombre..." class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-300">
        <button id="clearSearchBtn" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600">‚úï</button>
      </div>
      
      <!-- Filtros responsive -->
      <div class="flex gap-2 flex-wrap">
        <!-- Selector de fecha -->
        <div class="relative flex-grow min-w-[160px]">
          <input type="text" id="dateFilter" placeholder="Filtrar por fecha" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-300">
          <div class="absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1">
            <button id="clearDateBtn" class="text-gray-400 hover:text-gray-600 hidden">‚úï</button>
            <span class="text-indigo-400">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
              </svg>
            </span>
          </div>
        </div>
        
        <!-- Selector de rango -->
        <div class="relative flex-grow min-w-[140px]">
          <select id="dateRangeFilter" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-300 appearance-none pr-8 bg-white">
            <option value="">Todas las citas</option>
            <option value="today">Hoy</option>
            <option value="tomorrow">Ma√±ana</option>
            <option value="week">Esta semana</option>
            <option value="month">Este mes</option>
          </select>
          <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
            <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>
        </div>
        
        <!-- Bot√≥n para nueva cita -->
        <button id="addReservationBtn" class="w-full sm:w-auto bg-gradient-to-r from-indigo-600 to-indigo-400 text-white px-4 py-2 rounded-lg shadow hover:from-indigo-700 hover:to-indigo-500 transition focus:outline-none focus:ring-2 focus:ring-indigo-400 font-semibold">
          + Nueva Cita
        </button>
      </div>
    </div>
  </div>
</header>

<main class="p-6 flex-1 space-y-8 pt-16 sm:pt-6">
  <!-- Filtros y Controles -->
  <section class="bg-white/90 rounded-xl shadow-lg p-4 md:p-6 animate-fadeIn">
    <div class="flex flex-col md:flex-row gap-4 md:items-center justify-between mb-4">
      <h2 class="text-xl font-semibold text-indigo-800">Reportes y An√°lisis</h2>
      <div class="flex flex-wrap gap-3">
        <div class="relative">
          <input type="text" id="fechaInicio" placeholder="Fecha inicio" class="pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400">
          <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
        </div>
        <div class="relative">
          <input type="text" id="fechaFin" placeholder="Fecha fin" class="pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400">
          <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
        </div>
        <button id="aplicarFiltro" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center gap-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
          </svg>
          Aplicar
        </button>
        <button id="exportarReporte" class="border border-indigo-600 text-indigo-600 px-4 py-2 rounded-lg hover:bg-indigo-50 flex items-center gap-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
          </svg>
          Exportar
        </button>
      </div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Tipo de Reporte</label>
        <select id="tipoReporte" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400">
          <option value="ventas">Ventas y Facturaci√≥n</option>
          <option value="citas">Citas y Atenciones</option>
          <option value="productos">Inventario de Productos</option>
          <option value="servicios">Servicios Realizados</option>
          <option value="clientes">An√°lisis de Clientes</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Agrupar por</label>
        <select id="agruparPor" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400">
          <option value="dia">Por D√≠a</option>
          <option value="semana">Por Semana</option>
          <option value="mes">Por Mes</option>
          <option value="trimestre">Por Trimestre</option>
          <option value="anio">Por A√±o</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Optometrista</label>
        <select id="optometrista" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400">
          <option value="todos">Todos</option>
          <option value="1">Dr. Juan Ram√≠rez</option>
          <option value="2">Dra. Mar√≠a L√≥pez</option>
          <option value="3">Dr. Carlos M√©ndez</option>
        </select>
      </div>
    </div>
  </section>

  <!-- Tarjetas de KPIs -->
  <section class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6">
    <div class="bg-white/90 p-6 rounded-xl shadow-lg text-center border-t-4 border-indigo-500 group transition duration-300 hover:scale-105 hover:shadow-2xl animate-fadeIn">
      <div class="text-4xl font-extrabold text-indigo-700 mb-2 transition-transform duration-300 group-hover:scale-125" id="totalVentas">$2,568,700</div>
      <p class="text-gray-500 font-medium">Ventas Totales</p>
    </div>
    <div class="bg-white/90 p-6 rounded-xl shadow-lg text-center border-t-4 border-green-500 group transition duration-300 hover:scale-105 hover:shadow-2xl animate-fadeIn">
      <div class="text-4xl font-extrabold text-green-600 mb-2 transition-transform duration-300 group-hover:scale-125" id="citasAtendidas">387</div>
      <p class="text-gray-500 font-medium">Citas Atendidas</p>
    </div>
    <div class="bg-white/90 p-6 rounded-xl shadow-lg text-center border-t-4 border-yellow-400 group transition duration-300 hover:scale-105 hover:shadow-2xl animate-fadeIn">
      <div class="text-4xl font-extrabold text-yellow-500 mb-2 transition-transform duration-300 group-hover:scale-125" id="tiempoPromedio">28min</div>
      <p class="text-gray-500 font-medium">Tiempo Promedio</p>
    </div>
    <div class="bg-white/90 p-6 rounded-xl shadow-lg text-center border-t-4 border-purple-400 group transition duration-300 hover:scale-105 hover:shadow-2xl animate-fadeIn">
      <div class="text-4xl font-extrabold text-purple-500 mb-2 transition-transform duration-300 group-hover:scale-125" id="conversionRate">78%</div>
      <p class="text-gray-500 font-medium">Tasa de Conversi√≥n</p>
    </div>
  </section>

  <!-- Gr√°ficos Principales -->
  <section class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Ventas por Categor√≠a de Productos -->
    <div class="bg-white/90 rounded-2xl shadow-2xl p-4 md:p-6 flex flex-col items-center border-t-4 border-indigo-500 transition-all duration-300 hover:scale-[1.02] animate-fadeIn">
      <h2 class="text-lg font-bold mb-4 text-indigo-800 text-center">Ventas por Categor√≠a de Productos</h2>
      <div class="w-full h-72 flex items-center justify-center">
        <canvas id="ventasCategoriaChart" class="max-w-full max-h-64"></canvas>
      </div>
    </div>
    <!-- Ventas vs Citas por Mes -->
    <div class="bg-white/90 rounded-2xl shadow-2xl p-4 md:p-6 flex flex-col items-center border-t-4 border-green-400 transition-all duration-300 hover:scale-[1.02] animate-fadeIn">
      <h2 class="text-lg font-bold mb-4 text-green-700 text-center">Ventas vs Citas por Periodo</h2>
      <div class="w-full h-72 flex items-center justify-center">
        <canvas id="ventasCitasChart" class="max-w-full max-h-64"></canvas>
      </div>
    </div>
  </section>

  <!-- Reportes Espec√≠ficos -->
  <section class="grid grid-cols-1 xl:grid-cols-2 gap-6 md:gap-8">
    <!-- Productos M√°s Vendidos -->
    <div class="bg-white/90 rounded-2xl shadow-2xl p-4 md:p-6 flex flex-col border-t-4 border-blue-400 transition-all duration-300 hover:scale-[1.02] animate-fadeIn">
      <h2 class="text-lg font-bold mb-4 text-blue-700">Productos M√°s Vendidos</h2>
      <div class="overflow-x-auto rounded-lg">
        <table class="min-w-full text-sm text-left">
          <thead>
            <tr class="bg-blue-50 text-blue-700">
              <th class="px-4 py-2">Producto</th>
              <th class="px-4 py-2">Categor√≠a</th>
              <th class="px-4 py-2">Unidades</th>
              <th class="px-4 py-2">Ventas</th>
              <th class="px-4 py-2">% Total</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-blue-100">
            <tr class="hover:bg-blue-50">
              <td class="px-4 py-3 font-semibold">Montura Ray-Ban Aviator</td>
              <td class="px-4 py-3">Monturas</td>
              <td class="px-4 py-3 text-center">42</td>
              <td class="px-4 py-3">$15,330,000</td>
              <td class="px-4 py-3">18.2%</td>
            </tr>
            <tr class="hover:bg-blue-50">
              <td class="px-4 py-3 font-semibold">Lentes Transitions</td>
              <td class="px-4 py-3">Lentes</td>
              <td class="px-4 py-3 text-center">36</td>
              <td class="px-4 py-3">$12,960,000</td>
              <td class="px-4 py-3">15.4%</td>
            </tr>
            <tr class="hover:bg-blue-50">
              <td class="px-4 py-3 font-semibold">Soluci√≥n Limpiadora</td>
              <td class="px-4 py-3">Accesorios</td>
              <td class="px-4 py-3 text-center">98</td>
              <td class="px-4 py-3">$2,940,000</td>
              <td class="px-4 py-3">3.5%</td>
            </tr>
            <tr class="hover:bg-blue-50">
              <td class="px-4 py-3 font-semibold">Gafas de Sol Polarizadas</td>
              <td class="px-4 py-3">Gafas de Sol</td>
              <td class="px-4 py-3 text-center">29</td>
              <td class="px-4 py-3">$8,700,000</td>
              <td class="px-4 py-3">10.3%</td>
            </tr>
            <tr class="hover:bg-blue-50">
              <td class="px-4 py-3 font-semibold">Estuches Premium</td>
              <td class="px-4 py-3">Accesorios</td>
              <td class="px-4 py-3 text-center">63</td>
              <td class="px-4 py-3">$3,150,000</td>
              <td class="px-4 py-3">3.7%</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <!-- Servicios M√°s Solicitados -->
    <div class="bg-white/90 rounded-2xl shadow-2xl p-4 md:p-6 flex flex-col border-t-4 border-yellow-400 transition-all duration-300 hover:scale-[1.02] animate-fadeIn">
      <h2 class="text-lg font-bold mb-4 text-yellow-700">Servicios M√°s Solicitados</h2>
      <div class="overflow-x-auto rounded-lg">
        <table class="min-w-full text-sm text-left">
          <thead>
            <tr class="bg-yellow-50 text-yellow-700">
              <th class="px-4 py-2">Servicio</th>
              <th class="px-4 py-2">Cantidad</th>
              <th class="px-4 py-2">Ingresos</th>
              <th class="px-4 py-2">Duraci√≥n Prom.</th>
              <th class="px-4 py-2">% Total</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-yellow-100">
            <tr class="hover:bg-yellow-50">
              <td class="px-4 py-3 font-semibold">Examen de la Vista</td>
              <td class="px-4 py-3 text-center">156</td>
              <td class="px-4 py-3">$7,800,000</td>
              <td class="px-4 py-3">25 min</td>
              <td class="px-4 py-3">42.5%</td>
            </tr>
            <tr class="hover:bg-yellow-50">
              <td class="px-4 py-3 font-semibold">Control de Presi√≥n</td>
              <td class="px-4 py-3 text-center">87</td>
              <td class="px-4 py-3">$3,480,000</td>
              <td class="px-4 py-3">15 min</td>
              <td class="px-4 py-3">23.7%</td>
            </tr>
            <tr class="hover:bg-yellow-50">
              <td class="px-4 py-3 font-semibold">Ajuste de Montura</td>
              <td class="px-4 py-3 text-center">64</td>
              <td class="px-4 py-3">$640,000</td>
              <td class="px-4 py-3">10 min</td>
              <td class="px-4 py-3">17.4%</td>
            </tr>
            <tr class="hover:bg-yellow-50">
              <td class="px-4 py-3 font-semibold">Evaluaci√≥n Oftalmol√≥gica</td>
              <td class="px-4 py-3 text-center">42</td>
              <td class="px-4 py-3">$4,200,000</td>
              <td class="px-4 py-3">40 min</td>
              <td class="px-4 py-3">11.5%</td>
            </tr>
            <tr class="hover:bg-yellow-50">
              <td class="px-4 py-3 font-semibold">Adaptaci√≥n de Lentes</td>
              <td class="px-4 py-3 text-center">18</td>
              <td class="px-4 py-3">$900,000</td>
              <td class="px-4 py-3">30 min</td>
              <td class="px-4 py-3">4.9%</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- Rendimiento de Optometristas y Segmentaci√≥n de Clientes -->
  <section class="grid grid-cols-1 xl:grid-cols-2 gap-6 md:gap-8">
    <!-- Rendimiento de Optometristas -->
    <div class="bg-white/90 rounded-2xl shadow-2xl p-4 md:p-6 flex flex-col border-t-4 border-pink-400 transition-all duration-300 hover:scale-[1.02] animate-fadeIn">
      <h2 class="text-lg font-bold mb-4 text-pink-700">Rendimiento de Optometristas</h2>
      <div class="w-full h-72 flex items-center justify-center mb-4">
        <canvas id="optometristasChart" class="max-w-full max-h-64"></canvas>
      </div>
      <div class="overflow-x-auto rounded-lg mt-2">
        <table class="min-w-full text-sm text-left">
          <thead>
            <tr class="bg-pink-50 text-pink-700">
              <th class="px-4 py-2">Optometrista</th>
              <th class="px-4 py-2">Citas</th>
              <th class="px-4 py-2">Ventas</th>
              <th class="px-4 py-2">Conv.</th>
              <th class="px-4 py-2">Satisfacci√≥n</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-pink-100">
            <tr class="hover:bg-pink-50">
              <td class="px-4 py-3 font-semibold">Dr. Juan Ram√≠rez</td>
              <td class="px-4 py-3 text-center">87</td>
              <td class="px-4 py-3">$15,660,000</td>
              <td class="px-4 py-3">82%</td>
              <td class="px-4 py-3">4.8/5</td>
            </tr>
            <tr class="hover:bg-pink-50">
              <td class="px-4 py-3 font-semibold">Dra. Mar√≠a L√≥pez</td>
              <td class="px-4 py-3 text-center">74</td>
              <td class="px-4 py-3">$12,580,000</td>
              <td class="px-4 py-3">76%</td>
              <td class="px-4 py-3">4.7/5</td>
            </tr>
            <tr class="hover:bg-pink-50">
              <td class="px-4 py-3 font-semibold">Dr. Carlos M√©ndez</td>
              <td class="px-4 py-3 text-center">68</td>
              <td class="px-4 py-3">$11,560,000</td>
              <td class="px-4 py-3">74%</td>
              <td class="px-4 py-3">4.6/5</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <!-- Segmentaci√≥n de Clientes -->
    <div class="bg-white/90 rounded-2xl shadow-2xl p-4 md:p-6 flex flex-col border-t-4 border-cyan-400 transition-all duration-300 hover:scale-[1.02] animate-fadeIn">
      <h2 class="text-lg font-bold mb-4 text-cyan-700">Segmentaci√≥n de Clientes</h2>
      <div class="w-full h-72 flex items-center justify-center mb-4">
        <canvas id="clientesSegmentacion" class="max-w-full max-h-64"></canvas>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mt-4">
        <div class="bg-cyan-50 p-3 rounded-lg">
          <h3 class="text-sm font-semibold text-cyan-800 mb-1">Mayor Ticket Promedio</h3>
          <p class="text-xl font-bold text-cyan-700">$680,000</p>
          <p class="text-xs text-cyan-600">Grupo: Premium (35-50 a√±os)</p>
        </div>
        <div class="bg-cyan-50 p-3 rounded-lg">
          <h3 class="text-sm font-semibold text-cyan-800 mb-1">Mayor Frecuencia</h3>
          <p class="text-xl font-bold text-cyan-700">3.2 visitas</p>
          <p class="text-xs text-cyan-600">Grupo: Joven (18-24 a√±os)</p>
        </div>
        <div class="bg-cyan-50 p-3 rounded-lg">
          <h3 class="text-sm font-semibold text-cyan-800 mb-1">Mayor Retenci√≥n</h3>
          <p class="text-xl font-bold text-cyan-700">89%</p>
          <p class="text-xs text-cyan-600">Grupo: Senior (50+ a√±os)</p>
        </div>
      </div>
    </div>
  </section>

  <!-- An√°lisis de Tendencias y Proyecciones -->
  <section class="bg-white/90 rounded-2xl shadow-2xl p-4 md:p-6 flex flex-col border-t-4 border-purple-400 transition-all duration-300 hover:scale-[1.02] animate-fadeIn">
    <h2 class="text-lg font-bold mb-4 text-purple-700">An√°lisis de Tendencias y Proyecciones</h2>
    <div class="w-full h-80 flex items-center justify-center">
      <canvas id="tendenciasChart" class="max-w-full max-h-72"></canvas>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-6">
      <div class="bg-purple-50 p-4 rounded-lg">
        <h3 class="text-sm font-semibold text-purple-800 mb-1">Proyecci√≥n Pr√≥ximo Mes</h3>
        <p class="text-xl font-bold text-purple-700">$28,500,000</p>
        <p class="text-xs text-purple-600">+8.2% vs mes actual</p>
      </div>
      <div class="bg-purple-50 p-4 rounded-lg">
        <h3 class="text-sm font-semibold text-purple-800 mb-1">Tendencia Lentes Transitions</h3>
        <p class="text-xl font-bold text-purple-700">+15.7%</p>
        <p class="text-xs text-purple-600">Crecimiento sostenido</p>
      </div>
      <div class="bg-purple-50 p-4 rounded-lg">
        <h3 class="text-sm font-semibold text-purple-800 mb-1">Pron√≥stico Q4</h3>
        <p class="text-xl font-bold text-purple-700">$96,800,000</p>
        <p class="text-xs text-purple-600">+12% vs Q4 anterior</p>
      </div>
      <div class="bg-purple-50 p-4 rounded-lg">
        <h3 class="text-sm font-semibold text-purple-800 mb-1">ROI Marketing</h3>
        <p class="text-xl font-bold text-purple-700">3.2x</p>
        <p class="text-xs text-purple-600">Por cada $1 invertido</p>
      </div>
    </div>
  </section>
</main>

<!-- Inicializar los gr√°ficos en el reporte -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Configurar datepickers
  flatpickr("#fechaInicio", {
    dateFormat: "Y-m-d",
    locale: "es"
  });
  
  flatpickr("#fechaFin", {
    dateFormat: "Y-m-d",
    locale: "es"
  });

  // Gr√°fico de Ventas por Categor√≠a
  const ctxVentasCategoria = document.getElementById('ventasCategoriaChart').getContext('2d');
  new Chart(ctxVentasCategoria, {
    type: 'doughnut',
    data: {
      labels: ['Monturas', 'Lentes', 'Gafas de Sol', 'Lentes de Contacto', 'Accesorios'],
      datasets: [{
        data: [35, 28, 15, 12, 10],
        backgroundColor: ['#6366f1', '#22d3ee', '#f59e42', '#f43f5e', '#84cc16']
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { position: 'bottom' }
      }
    }
  });

  // Gr√°fico de Ventas vs Citas
  const ctxVentasCitas = document.getElementById('ventasCitasChart').getContext('2d');
  new Chart(ctxVentasCitas, {
    type: 'line',
    data: {
      labels: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio'],
      datasets: [
        {
          label: 'Ventas (millones)',
          data: [18.5, 21.2, 19.8, 24.5, 26.8, 25.4],
          borderColor: '#22c55e',
          backgroundColor: 'rgba(34, 197, 94, 0.1)',
          fill: true,
          tension: 0.4,
          yAxisID: 'y'
        },
        {
          label: 'Citas',
          data: [42, 56, 48, 67, 72, 68],
          borderColor: '#6366f1',
          borderDash: [5, 5],
          fill: false,
          tension: 0.4,
          yAxisID: 'y1'
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: {
          type: 'linear',
          position: 'left',
          title: {
            display: true,
            text: 'Ventas (millones)'
          }
        },
        y1: {
          type: 'linear',
          position: 'right',
          title: {
            display: true,
            text: 'Citas'
          },
          grid: {
            drawOnChartArea: false
          }
        }
      }
    }
  });

  // Gr√°fico de Rendimiento de Optometristas
  const ctxOptometristas = document.getElementById('optometristasChart').getContext('2d');
  new Chart(ctxOptometristas, {
    type: 'radar',
    data: {
      labels: ['Citas', 'Ventas', 'Conversi√≥n', 'Satisfacci√≥n', 'Tiempo'],
      datasets: [
        {
          label: 'Dr. Juan Ram√≠rez',
          data: [87, 90, 82, 96, 75],
          backgroundColor: 'rgba(99, 102, 241, 0.2)',
          borderColor: '#6366f1'
        },
        {
          label: 'Dra. Mar√≠a L√≥pez',
          data: [74, 85, 76, 94, 82],
          backgroundColor: 'rgba(236, 72, 153, 0.2)',
          borderColor: '#ec4899'
        },
        {
          label: 'Dr. Carlos M√©ndez',
          data: [68, 78, 74, 92, 88],
          backgroundColor: 'rgba(245, 158, 66, 0.2)',
          borderColor: '#f59e42'
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        r: {
          min: 0,
          max: 100
        }
      }
    }
  });

  // Gr√°fico de Segmentaci√≥n de Clientes
  const ctxClientesSegmentacion = document.getElementById('clientesSegmentacion').getContext('2d');
  new Chart(ctxClientesSegmentacion, {
    type: 'bar',
    data: {
      labels: ['18-24', '25-34', '35-50', '50+'],
      datasets: [
        {
          label: 'Cantidad',
          data: [42, 86, 124, 68],
          backgroundColor: '#0ea5e9',
          borderRadius: 8
        },
        {
          label: 'Ticket Promedio',
          data: [320, 480, 680, 540],
          backgroundColor: '#22d3ee',
          borderRadius: 8
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });

  // Gr√°fico de Tendencias y Proyecciones
  const ctxTendencias = document.getElementById('tendenciasChart').getContext('2d');
  new Chart(ctxTendencias, {
    type: 'line',
    data: {
      labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
      datasets: [
        {
          label: 'Ventas Reales',
          data: [18.5, 21.2, 19.8, 24.5, 26.8, 25.4, 27.2, 28.4, null, null, null, null],
          borderColor: '#8b5cf6',
          backgroundColor: 'rgba(139, 92, 246, 0.1)',
          fill: true,
          tension: 0.4
        },
        {
          label: 'Proyecci√≥n',
          data: [null, null, null, null, null, null, null, 28.4, 28.5, 29.8, 32.4, 34.6],
          borderColor: '#a855f7',
          borderDash: [5, 5],
          backgroundColor: 'rgba(168, 85, 247, 0.1)',
          fill: true,
          tension: 0.4
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        tooltip: {
          callbacks: {
            label: function(context) {
              return context.dataset.label + ": " + context.parsed.y + "M";
            }
          }
        }
      },
      scales: {
        y: {
          title: {
            display: true,
            text: 'Ventas (millones)'
          }
        }
      }
    }
  });

  // Evento para el bot√≥n de exportar reporte
  document.getElementById('exportarReporte').addEventListener('click', function() {
    alert('Descargando reporte en PDF...');
    // Aqu√≠ implementar√≠as la funcionalidad para generar y descargar el PDF
  });

  // Evento para cambiar el tipo de reporte
  document.getElementById('tipoReporte').addEventListener('change', function() {
    // Aqu√≠ actualizar√≠as los gr√°ficos seg√∫n el tipo seleccionado
    alert('Cambiando a reporte de: ' + this.options[this.selectedIndex].text);
  });
});

// Reemplaza toda la secci√≥n del evento DOMContentLoaded para el men√∫ hamburguesa con esto:
// Funcionalidad para el men√∫ hamburguesa en m√≥viles
document.addEventListener('DOMContentLoaded', function() {
  const sidebarToggle = document.getElementById('sidebarToggle');
  const sidebarMobile = document.getElementById('sidebarMobile');
  const sidebarMobileBackdrop = document.getElementById('sidebarMobileBackdrop');
  const closeSidebarMobile = document.getElementById('closeSidebarMobile');
  
  // Funci√≥n para mostrar/ocultar el bot√≥n hamburguesa
  function toggleHamburgerButton(visible = true) {
    if (sidebarToggle) {
      sidebarToggle.style.opacity = visible ? '1' : '0';
      sidebarToggle.style.pointerEvents = visible ? 'auto' : 'none';
    }
  }
  
  // Funci√≥n para abrir el men√∫
  function openMobileMenu() {
    if (sidebarMobile && sidebarMobileBackdrop) {
      sidebarMobile.classList.remove('-translate-x-full');
      sidebarMobileBackdrop.classList.remove('hidden');
      document.body.style.overflow = 'hidden'; // Prevenir scroll
      toggleHamburgerButton(false); // Oculta el bot√≥n hamburguesa
    }
  }
  
  // Funci√≥n para cerrar el men√∫
  function closeMobileMenu() {
    if (sidebarMobile) {
      sidebarMobile.classList.add('-translate-x-full');
      setTimeout(() => {
        if (sidebarMobileBackdrop) {
          sidebarMobileBackdrop.classList.add('hidden');
        }
        toggleHamburgerButton(true); // Muestra el bot√≥n hamburguesa despu√©s de cerrar
      }, 300); // Espera a que termine la transici√≥n
      document.body.style.overflow = ''; // Restaurar scroll
    }
  }
  
  // Evento para el bot√≥n de hamburguesa
  if (sidebarToggle) {
    sidebarToggle.addEventListener('click', openMobileMenu);
  }
  
  // Evento para el bot√≥n de cerrar
  if (closeSidebarMobile) {
    closeSidebarMobile.addEventListener('click', closeMobileMenu);
  }
  
  // Evento para cerrar al hacer clic en el backdrop
  if (sidebarMobileBackdrop) {
    sidebarMobileBackdrop.addEventListener('click', closeMobileMenu);
  }
  
  // Cerrar men√∫ al hacer clic en enlaces (opcional)
  if (sidebarMobile) {
    const mobileMenuLinks = sidebarMobile.querySelectorAll('a');
    mobileMenuLinks.forEach(link => {
      link.addEventListener('click', closeMobileMenu);
    });
  }
  
  // Cerrar men√∫ al presionar la tecla Escape
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && sidebarMobileBackdrop && !sidebarMobileBackdrop.classList.contains('hidden')) {
      closeMobileMenu();
    }
  });
});

// Actualizar la funci√≥n renderCitas para generar tarjetas m√°s adaptables
function renderCitas(citas, page = 1) {
  const container = document.getElementById('citasContainer');
  container.innerHTML = ''; // Limpiar contenido existente

  citas.forEach(cita => {
    const fecha = new Date(cita.Fecha);
    const esHoy = new Date().toDateString() === fecha.toDateString();
    const fechaFormateada = fecha.toLocaleDateString('es-ES', { year: 'numeric', month: 'numeric', day: 'numeric' });
    const estadoColor = cita.Estado === 'Confirmada' ? 'bg-green-100 text-green-800' : cita.Estado === 'Pendiente' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800';
    const cardClass = cita.Estado === 'Cancelada' ? 'opacity-50' : '';

    // Modificar la creaci√≥n de tarjetas
    container.innerHTML += `
      <div id="cita-card-${cita.ID}" class="rounded-xl shadow-lg p-4 sm:p-5 bg-white flex flex-col gap-2 ${cardClass} relative animate-fadeIn">
        ${esHoy ? '<div class="absolute -top-2 -right-2 bg-indigo-500 text-white text-xs px-2 py-1 rounded-full shadow-sm">HOY</div>' : ''}
        
        <div class="flex justify-between items-center">
          <span class="font-bold text-indigo-700 text-base sm:text-lg info-highlight truncate max-w-[190px] sm:max-w-full">${cita['Nombre Cliente']}</span>
          <span class="px-2 sm:px-3 py-1 rounded-full text-xs font-semibold ${estadoColor}">${cita.Estado}</span>
        </div>
        
        <div class="flex flex-col flex-1">
          <div class="grid grid-cols-2 gap-1 sm:gap-2 text-xs sm:text-sm">
            <div class="text-gray-500">
              <span class="font-medium text-gray-700">ID:</span> ${cita.ID}
            </div>
            <div class="text-gray-500 text-right">
              <span class="font-medium text-gray-700">Fecha:</span> ${fechaFormateada}
            </div>
          </div>
          
          <div class="mt-2 text-xs sm:text-sm">
            <span class="block text-gray-500">
              <span class="font-medium text-gray-700">Observaciones:</span> 
              <span class="line-clamp-2">${cita.Observaciones || 'Ninguna'}</span>
            </span>
          </div>
        </div>
        
        <div class="flex gap-1 sm:gap-2 mt-4">
          <button class="action-btn confirmar-btn flex-1 px-2 sm:px-4 py-2 rounded-lg bg-indigo-600 text-white font-semibold text-xs sm:text-sm shadow hover:bg-indigo-700 transition-all ${cita.Estado !== 'Activo' && cita.Estado !== 'Pendiente' ? 'opacity-50 cursor-not-allowed' : ''}" 
            ${cita.Estado !== 'Activo' && cita.Estado !== 'Pendiente' ? 'disabled' : ''}>
            <span class="hidden sm:inline">‚úîÔ∏è</span> Confirmar
          </button>
          <button class="action-btn cancelar-btn flex-1 px-2 sm:px-4 py-2 rounded-lg bg-red-600 text-white font-semibold text-xs sm:text-sm shadow hover:bg-red-700 transition-all ${cita.Estado !== 'Activo' && cita.Estado !== 'Pendiente' ? 'opacity-50 cursor-not-allowed' : ''}"
            ${cita.Estado !== 'Activo' && cita.Estado !== 'Pendiente' ? 'disabled' : ''}>
            <span class="hidden sm:inline">‚ùå</span> Cancelar
          </button>
        </div>
      </div>
    `;
  });
}

// Ejemplo de uso
const citasEjemplo = [
  { ID: 1, 'Nombre Cliente': 'Juan P√©rez', Fecha: '2025-03-15', Estado: 'Pendiente', Observaciones: 'Llegar√° tarde' },
  { ID: 2, 'Nombre Cliente': 'Mar√≠a L√≥pez', Fecha: '2025-03-15', Estado: 'Confirmada', Observaciones: '' },
  { ID: 3, 'Nombre Cliente': 'Carlos S√°nchez', Fecha: '2025-03-16', Estado: 'Cancelada', Observaciones: 'No puede asistir' },
  { ID: 4, 'Nombre Cliente': 'Ana G√≥mez', Fecha: '2025-03-17', Estado: 'Pendiente', Observaciones: 'Confirmar por tel√©fono' }
];

renderCitas(citasEjemplo);

// Actualizar la funci√≥n mostrarModalConfirmacion
function mostrarModalConfirmacion(accion, citaId) {
  return new Promise((resolve) => {
    // Crear modal de confirmaci√≥n
    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 animate-fadeIn p-4';
    modal.id = 'modalConfirmacion';
    
    const contenido = document.createElement('div');
    contenido.className = 'bg-white rounded-lg p-4 sm:p-6 w-full max-w-xs sm:max-w-md mx-auto shadow-xl transform transition-all animate-bounceIn';
    
    const titulo = accion === 'Completada' ? 'Confirmar cita' : 'Cancelar cita';
    const mensaje = accion === 'Completada' 
      ? `¬øEst√° seguro que desea marcar la cita #${citaId} como completada?` 
      : `¬øEst√° seguro que desea cancelar la cita #${citaId}?`;
    const colorBoton = accion === 'Completada' ? 'bg-green-600 hover:bg-green-700' : 'bg-red-600 hover:bg-red-700';
    
    contenido.innerHTML = `
      <div class="flex items-center mb-4">
        <div class="mr-4 bg-${accion === 'Completada' ? 'green' : 'red'}-100 rounded-full p-2">
          <svg class="w-5 h-5 sm:w-6 sm:h-6 text-${accion === 'Completada' ? 'green' : 'red'}-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${accion === 'Completada' 
              ? 'M5 13l4 4L19 7' 
              : 'M6 18L18 6M6 6l12 12'}"></path>
          </svg>
        </div>
        <h3 class="text-base sm:text-lg font-medium text-gray-900">${titulo}</h3>
      </div>
      <p class="text-sm sm:text-base text-gray-500 mb-5">${mensaje}</p>
      <div class="flex justify-end gap-3">
        <button id="cancelarAccion" class="px-3 sm:px-4 py-1.5 sm:py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors text-sm sm:text-base">
          Volver
        </button>
        <button id="confirmarAccion" class="px-3 sm:px-4 py-1.5 sm:py-2 ${colorBoton} text-white rounded transition-colors text-sm sm:text-base">
          ${accion === 'Completada' ? 'Confirmar' : 'Cancelar cita'}
        </button>
      </div>
    `;
    
    modal.appendChild(contenido);
    document.body.appendChild(modal);
    
    // El resto del c√≥digo se mantiene igual...
  });
}

// Actualizar la funci√≥n mostrarNotificacion
function mostrarNotificacion(mensaje, tipo = 'exito') {
  // Elimina notificaci√≥n anterior si existe
  const notificacionExistente = document.getElementById('notificacion');
  if (notificacionExistente) {
    notificacionExistente.remove();
  }
  
  // Crea nueva notificaci√≥n
  const notificacion = document.createElement('div');
  notificacion.id = 'notificacion';
  
  // Ajustar posici√≥n y estilo seg√∫n dispositivo
  const esMobile = window.innerWidth < 640;
  notificacion.className = `fixed ${esMobile ? 'top-4 left-4 right-4' : 'bottom-4 right-4'} px-4 sm:px-6 py-2 sm:py-3 rounded-lg shadow-lg animate-bounceIn text-sm sm:text-base
    ${tipo === 'exito' ? 'bg-green-500 text-white' : tipo === 'info' ? 'bg-blue-500 text-white' : 'bg-red-500 text-white'}`;
  
  // Limitar longitud del mensaje en m√≥viles
  if (esMobile && mensaje.length > 60) {
    mensaje = mensaje.substring(0, 57) + '...';
  }
  
  notificacion.textContent = mensaje;
  
  // Agrega bot√≥n para cerrar
  const cerrarBtn = document.createElement('button');
  cerrarBtn.className = 'ml-3 font-bold';
  cerrarBtn.textContent = '‚úï';
  cerrarBtn.onclick = () => notificacion.remove();
  notificacion.appendChild(cerrarBtn);
  
  // Agrega al DOM
  document.body.appendChild(notificacion);
  
  // El resto del c√≥digo se mantiene igual...
}
// Agregar al final del c√≥digo
window.addEventListener('resize', function() {
  // Ajustar el panel de notificaciones
  const panel = document.getElementById('notificationsPanel');
  if (panel && !panel.classList.contains('hidden')) {
    if (window.innerWidth < 640) {
      panel.style.right = '0';
      panel.style.left = '0';
    } else {
      panel.style.removeProperty('left');
    }
  }
  
  // Re-renderizar la paginaci√≥n si est√° visible
const paginationContainer = document.getElementById('paginationContainer');
if (paginationContainer && typeof renderPagination === 'function') {
  renderPagination(filteredCitas?.length > 0 ? filteredCitas : todasLasCitas);
}
});
</script>
</body>
</html>